---
import { changeLanguage } from "i18next";
import Layout from "@layouts/Layout.astro";
import type {
  PageMetaTag,
  OpenGraphMetaTag,
  TwitterMetaTag,
} from "@customTypes/seo/types";
import defaultJson from "@data/site-info.json";
const receivedJson = Astro.props;

const pageMetaTag: PageMetaTag = {
    title: receivedJson?.title ?? defaultJson.pageTitle,
    description: receivedJson?.description ?? defaultJson.pageDescription,
    keywords: receivedJson?.keywords ?? defaultJson.pageKeywords,
    author: receivedJson?.author ?? defaultJson.pageAuthor,
  },
  opengraphMetaTag: OpenGraphMetaTag = {
    title: receivedJson?.ogTitle ?? receivedJson?.title ?? defaultJson.ogTitle,
    type: receivedJson?.ogType ?? defaultJson.ogType,
    image:
      receivedJson?.ogImage ??
      receivedJson?.twitterImage ??
      defaultJson.ogImage,
    description:
      receivedJson?.ogDescription ??
      receivedJson?.description ??
      defaultJson.ogDescription,
  },
  twitterMetaTag: TwitterMetaTag = {
    cardType: receivedJson?.twitterCardType ?? defaultJson.twitterCardType,
    title:
      receivedJson?.twitterTitle ??
      receivedJson?.ogType ??
      defaultJson.twitterTitle,
    description:
      receivedJson?.twitterDescription ??
      receivedJson?.ogDescription ??
      defaultJson.pageDescription,
    image: receivedJson?.twitterImage ?? defaultJson.twitterImage,
  };
changeLanguage("cn");
---

<Layout
  page={pageMetaTag}
  openGraph={opengraphMetaTag}
  twitter={twitterMetaTag}
>
  <slot />
</Layout>
