---
const {product} = Astro.props
import i18next, { t, changeLanguage } from "i18next";
import { Img, Picture } from "astro-imagetools/components";
let productContent = `products:contents.${product.slug}.contents`;

let leftDetailsCount = Math.floor(parseInt(t(`${productContent}.section2.details.count`))/2);
let rightDetailsCount = parseInt(t(`${productContent}.section2.details.count`)) - leftDetailsCount;
---
<section class="text-[0.875rem] text-text-primary md:flex md:flex-row">
    <div class="w-full md:w-6/12 ">
        <!--Image Gallery -->
        <div>
            <!--Feature -->
            <div class="border-[1px] border-solid border-[#cccccc] ">
            {
                Array.from({length:parseInt(t(`${productContent}.section1.imageGallery.count`))}).map((el:any, index:number)=>{
                    return(

                        <div class={`${index !== 0 && "hidden"}  transition-all duration-300 scale-[0.95] hover:scale-[1.0]`}>
                            <Picture src={t(`${productContent}.section1.imageGallery.images.image${index+1}.src`)} alt={t(`${productContent}.section1.imageGallery.images.image${index+1}.alt`)}/>
                        </div>
                    )
                })
            }
            </div>
            <!--image selection -->
            <div class="flex flex-row flex-wrap mt-4 space-x-2">
                {Array.from({length:parseInt(t(`${productContent}.section1.imageGallery.count`))}).map((el:any, index:number)=>{
                     return(

                         <div class="w-[80px] border-[1px] border-solid border-[#cccccc] hover:border-red-primary">
                            <Picture src={t(`${productContent}.section1.imageGallery.images.image${index+1}.src`)} alt={t(`${productContent}.section1.imageGallery.images.image${index+1}.alt`)}/>
                        </div>
                     )
                })}
            </div>
        </div>
    </div>
    <div class="w-full  text-text-primary px-6 md:w-6/12">
        
        <h3 class="font-semibold my-8  text-[1.5rem]">{t(`${productContent}.section1.label`)}</h3>
        <!--Parameters -->
        <ul class=" mb-4">
            {Array.from({length:parseInt(t(`${productContent}.section1.parameters.count`))}).map((el:any, index:number)=>{
                return(
                    <li class="list-disc list-inside ">{t(`${productContent}.section1.parameters.parameters.parameter${index+1}`)}</li>
                )
            })}
        </ul>
        <!--disclaimer -->
        <div>
            {t(`${productContent}.section1.disclaimer`)}
        </div>
        <!--QQChat -->
        <div class="w-fit mt-8">
            <a href="http://wpa.qq.com/msgrd?v=3&amp;uin=382016693&amp;site=qq&amp;menu=yes" target="_blank" class="flex flex-row bg-[#ffe4d0] rounded-[0.5rem] px-10 py-2">
                <svg  xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path class="fill-[#E5511D]" fill="currentColor" d="M3.18 13.54c.58-1.38 1.39-2.4 1.99-2.62c-.01-.8.14-1.3.39-1.7c0-.03-.06-.36.16-.77C5.87 4.85 8.21 2 12 2s6.13 2.85 6.28 6.45c.22.41.16.74.16.77c.25.4.4.9.39 1.7c.6.22 1.41 1.24 1.99 2.63c.75 1.76.87 3.45.27 3.75c-.41.2-1.06-.3-1.67-1.18c-.24.98-.84 1.88-1.69 2.59c.9.33 1.48.87 1.48 1.48c0 1-1.58 1.81-3.52 1.81c-1.76 0-3.19-.66-3.48-1.5h-.42c-.29.84-1.72 1.5-3.48 1.5c-1.94 0-3.52-.81-3.52-1.81c0-.61.58-1.15 1.48-1.48c-.85-.71-1.45-1.61-1.69-2.59c-.61.88-1.26 1.38-1.67 1.18c-.6-.3-.48-1.99.27-3.76Z"/></svg><span class="text-[#E5511D] ml-4">{t(`products:QQchat.btnLabel`)}</span>
            </a>
        </div>
        <div class="mt-1">
            <span>{t(`products:QQchat.telephone`)}:</span><span class="pl-4 text-[1.5rem]">{t(`products:QQchat.telephoneNumber`)}</span>
        </div>
        
    </div>
</section>
<!--Product-details-section -->
<section class="mt-8">
    <div class="text-white bg-[#333333] py-1 px-6 mb-[-1px] w-fit rounded-t-[0.5rem]">
        {t(`${productContent}.section2.tabLabel`)}
    </div>
    <div class="border-[1px] border-dotted border-[#ccc] py-8 px-4" >
        <!--Header -->
        {
            i18next.language === "cn" && <h3 class="text-[1.5rem] my-8 text-center">{t(`${productContent}.section2.header`)}</h3>
        }
        <!--images -->
        <div class="block flex-row flex-wrap md:flex">
            {Array.from({length:parseInt(t(`${productContent}.section2.imageGallery.count`))}).map((el:any, index:number)=>{
                return(
                    <div class="border-[1px] border-solid border-[#ccc] w-full h-fit md:w-6/12 lg:w-3/12">
                        <Img src={t(`${productContent}.section2.imageGallery.image${index+1}.src`)} alt={t(`${productContent}.section2.imageGallery.image${index+1}.alt`)}/>
                        <div class="w-full mt-4 text-center text-[0.875rem]">{t(`${productContent}.section2.imageGallery.image${index+1}.name`)}</div>
                    </div>
                )
            })}
        </div>
        <!--Details -->
        <div class="my-4 flex flex-row">
            <div class="w-full md:w-6/12 lg:w-6/12">
                {
                    Array.from({length : leftDetailsCount}).map((el:any,index:number)=>{
                        return(
                            <div>
                                <h4 class="font-semibold mb-2">{t(`${productContent}.section2.details.detail${1 + index}.label`)}</h4>
                                <ul class="mb-8">
                                {
                                    Array.from(
                                        {length: parseInt(t(`${productContent}.section2.details.detail${1 + index}.count`))}
                                        ).map((item:any, itemIndex:number)=>{
                                            return (
                                                <li class="list-disc list-inside text-[0.875rem]">{t(`${productContent}.section2.details.detail${1+index}.items.item${1+itemIndex}`)}</li>
                                            )
                                        })
                                        
                                }
                                </ul>
                            </div>
                )})}
            </div>
            <div class="w-full md:w-6/12 lg:w-6/12">
                {
                    Array.from({length : rightDetailsCount}).map((el:any,index:number)=>{
                        return(
                            <div>
                                <h4 class="font-semibold mb-2">{t(`${productContent}.section2.details.detail${1 +leftDetailsCount + index}.label`)}</h4>
                                <ul class="mb-8">
                                {
                                    Array.from(
                                        {length: parseInt(t(`${productContent}.section2.details.detail${1 + leftDetailsCount + index}.count`))}
                                        ).map((item:any, itemIndex:number)=>{
                                            return (
                                                <li class="list-disc list-inside text-[0.875rem]">{t(`${productContent}.section2.details.detail${1+leftDetailsCount+index}.items.item${1+itemIndex}`)}</li>
                                            )
                                        })
                                        
                                }
                                </ul>
                            </div>
                )})}
            </div>
        </div>
        <!--Replaces -->
        <div>
            <h2 class="text-[1.5rem] mb-2 text-center">
                {t(`${productContent}.section2.replaces.header`)}
            </h2>
            <ul class="mb-8 text-[0.875rem]">
               {Array.from({length:parseInt(t(`${productContent}.section2.replaces.count`))}).map((el:any, index:number)=>{
                return (
                    <li class="list-disc list-inside text-[0.875rem]" >{t(`${productContent}.section2.replaces.items.item${1+index}`)}</li>
                )
               })} 
            </ul>
        </div>
        <div>
            
            <Picture src={t(`${productContent}.section2.replaces.cutawayDiagram`)} alt="cutaway digram of item"/>
        </div>
    </div>
    
</section>

